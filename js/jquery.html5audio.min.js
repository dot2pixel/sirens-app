(function(g){g.fn.html5audio=function(f){function Wa(a){p=Math.max(0,Math.min(1,(a-la.offset().left)/S));ma()}function ma(){Ab.css("width",p*S+"px");k&&soundManager.setVolume(m,100*p);0<p?d.find(".player_volume").find("img").attr("src",Xa):d.find(".player_volume").find("img").attr("src",Ya)}function Bb(){k&&($.css("display","block"),aa.bind("mousemove",Za).bind("mouseout",na),E.bind("mouseout",na))}function na(){k&&($.css("display","none"),aa.unbind("mousemove",Za).unbind("mouseout",na),E.unbind("mouseout", na))}function Za(a){a=a.pageX-la.offset().left;0>a?a=0:a>S&&(a=S);var b=a+parseInt(aa.css("left"),10)+parseInt(Cb.css("left"),10)+parseInt(la.css("left"),10)-$.width()/2;$.css("left",b+"px");a=Math.max(0,Math.min(1,a/S));a=parseInt(100*a,10);$.find("p").html(a+" %")}function $a(a){O=a-ab.offset().left;0>O?O=0:O>K&&(O=K);oa.width(O);a=Math.max(0,Math.min(1,O/K));soundManager.setPosition(m,a*Db())}function Eb(){k&&(ba.css("display","block"),T.bind("mousemove",bb).bind("mouseout",pa),E.bind("mouseout", pa))}function pa(){k&&(ba.css("display","none"),T.unbind("mousemove",bb).unbind("mouseout",pa),E.unbind("mouseout",pa))}function bb(a){a=a.pageX-T.offset().left;0>a?a=0:a>K&&(a=K);var b=a+parseInt(T.css("left"),10)-ba.width()/2;ba.css("left",b+"px");a=Math.max(0,Math.min(1,a/K));b=q.duration?parseInt(q.bytesLoaded/q.bytesTotal*(q.duration/1E3)):P?parseInt(q.bytesLoaded/q.bytesTotal*(P/1E3)):void 0;a*=b;isNaN(a)||ba.find("p").html(Ba(a)+Fb+cb(q.duration/1E3))}function Ca(){x?(x.reinitialise(),x.scrollToY(0)): (x=Q.jScrollPane().data().jsp,Q.bind("jsp-initialised",function(){}).jScrollPane({verticalDragMinHeight:30,verticalDragMaxHeight:40}))}function db(a){t?(soundManager.pause(m),t=!1,a?d.find(".controls_toggle").find("img").attr("src",!H?Da:I):d.find(".controls_toggle").find("img").attr("src",H?Da:I)):(soundManager.play(m),t=!0,a?d.find(".controls_toggle").find("img").attr("src",!H?Ea:ca):d.find(".controls_toggle").find("img").attr("src",H?Ea:ca));return!1}function Fa(a){if(n&&!r)return a||(a=window.event), a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=g(a.currentTarget).attr("data-id"),L(),e.processPlaylistRequest(a),!1}function L(){if(-1!=e.getCounter()){var a=g(z[e.getCounter()]);a&&a.removeClass("playlistSelected").addClass("playlistNonSelected")}}function eb(){var a=g(z[e.getCounter()]);a&&a.removeClass("playlistNonSelected").addClass("playlistSelected")}function Gb(a){if(n&&!r){a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(); a=g(a.currentTarget).attr("class");if("controls_prev"==a){if(!k)return;L();e.advanceHandler(-1,!0)}else if("controls_toggle"==a){if(!k)return;db(!0)}else if("controls_next"==a){if(!k)return;L();e.advanceHandler(1,!0)}else"player_volume"==a?(qa?(p=fb,qa=!1):(fb=p,p=0,qa=!0),ma()):"player_loop"==a?(A?(d.find(".player_loop").find("img").attr("src",ra),A=!1):(d.find(".player_loop").find("img").attr("src",da),A=!0),e.setLooping(A)):"player_shuffle"==a&&(B?(d.find(".player_shuffle").find("img").attr("src", sa),B=!1):(d.find(".player_shuffle").find("img").attr("src",ea),B=!0),e.setRandom(B));return!1}}function Hb(a){if(n)return a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=g(a.currentTarget).attr("class"),"controls_prev"==a?d.find(".controls_prev").find("img").attr("src",Ib):"controls_toggle"==a?t?d.find(".controls_toggle").find("img").attr("src",Ea):d.find(".controls_toggle").find("img").attr("src",Da):"controls_next"==a?d.find(".controls_next").find("img").attr("src", Jb):"player_volume"==a?0<p?d.find(".player_volume").find("img").attr("src",Kb):d.find(".player_volume").find("img").attr("src",Lb):"player_loop"==a?A?d.find(".player_loop").find("img").attr("src",ra):d.find(".player_loop").find("img").attr("src",da):"player_shuffle"==a&&(B?d.find(".player_shuffle").find("img").attr("src",sa):d.find(".player_shuffle").find("img").attr("src",ea)),!1}function Mb(a){if(n)return a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(), a=g(a.currentTarget).attr("class"),"controls_prev"==a?d.find(".controls_prev").find("img").attr("src",Nb):"controls_toggle"==a?t?d.find(".controls_toggle").find("img").attr("src",ca):d.find(".controls_toggle").find("img").attr("src",I):"controls_next"==a?d.find(".controls_next").find("img").attr("src",Ob):"player_volume"==a?0<p?d.find(".player_volume").find("img").attr("src",Xa):d.find(".player_volume").find("img").attr("src",Ya):"player_loop"==a?A?d.find(".player_loop").find("img").attr("src",da): d.find(".player_loop").find("img").attr("src",ra):"player_shuffle"==a&&(B?d.find(".player_shuffle").find("img").attr("src",ea):d.find(".player_shuffle").find("img").attr("src",sa)),!1}function gb(){h&&-1!=e.getCounter()&&(Ga(),hb(),d.find(".controls_toggle").find("img").attr("src",I),L())}function fa(){Ga();hb();var a=0;for(a;a<s;a++)g(z[a]).unbind("click",Fa);"hidden"!=h&&h.remove();h=null;e.reSetCounter();u=[];z=[];C=[];H&&(U=!1);x&&x.reinitialise()}function ib(a){jb();Q.css("opacity",0);h&&fa(); var b=Pb.find(a).css("display","block").clone();x?b.appendTo(x.getContentPane()):b.appendTo(Q);0==b.length?j&&alert('Failed to select playlist! Make sure that element: "'+a+'" exist in playlist list! Quitting.'):(h=b,u=[],z=[],C=[],D=[],b.find("li[class='playlistItem']").each(function(){_item=g(this);D.push(_item)}),R())}function R(){if(D.length){var a=D[0],b=a.attr("data-type").toLowerCase(),c=a.attr("data-path");v=[];if("local"==b)C.push(a),z.push(a.find("a[class='playlistNonSelected']")),D.shift(), R();else if("soundcloud"==b)a.remove(),Ha(c);else if("podcast"==b)a.remove(),b="http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&output=xml&num=10&callback=?&q="+encodeURIComponent(c),g.ajax({type:"GET",url:b,dataType:"jsonp",cache:!1,success:function(a){if(kb){a=a.responseData.xmlString;if(window.ActiveXObject&&window.GetObject){var b=new ActiveXObject("Microsoft.XMLDOM");b.loadXML(a);a=b}else if(window.DOMParser)a=(new DOMParser).parseFromString(a,"text/xml");else throw Error("No XML parser available"); var c;g(a).find("item").each(function(){c=g(this);e={type:"podcast"};e.mp3=c.find("enclosure").attr("url");e.ogg="";e.title=c.find("title").text();v.push(e)})}else{lb.html(a.responseData.xmlString);a=lb.get(0).getElementsByTagName("item");var b=0,d=a.length,f,F,e;for(b;b<d;b++){f=a[b];e={type:"podcast"};e.mp3=f.getElementsByTagName("enclosure")[0].getAttribute("url");e.ogg="";if(void 0!=f.getElementsByTagName("itunes:duration")[0]){F=f.getElementsByTagName("itunes:duration")[0].childNodes[0].nodeValue.split(":"); for(var h=0,j=1;0<F.length;)h+=j*parseInt(F.pop()),j*=60;F=h;e.length=parseInt(1E3*F,10)}e.title=f.getElementsByTagName("title")[0].childNodes[0].nodeValue;v.push(e)}}ga()},error:function(a,b){j&&alert("Parse feed error: "+b);j&&alert("Playlist selection failed: "+c);D.shift();R()}});else if("folder"==b)a.remove(),jQuery.getJSON("folder_parser.php","folderUrl="+c,function(a){var b=0,c=a.length,d,e;for(b;b<c;b++)d=a[b],e={type:"local"},d.indexOf(".mp3")&&(e.mp3=d),e.ogg=d.substr(0,d.lastIndexOf("."))+ ".ogg",no_ext=d.substr(0,d.lastIndexOf(".")),d=no_ext.indexOf("/")?no_ext.substr(no_ext.lastIndexOf("/")+1):no_ext,d=d.split("_").join(" "),e.title=d,v.push(e);ga()}).error(function(){j&&alert("Read folder error! Make sure you run this online or on local server!");j&&alert("Playlist selection failed: "+c);D.shift();R()});else if("xml"==b){Ia=a;a.css("display","none");var d,F,f,h,w,l;g.ajax({type:"GET",url:c,dataType:"html",cache:!1,success:function(b){g(b).find("li[class='playlistItem']").each(function(){l= g(this);w=l.attr("data-type");d=g("<div>").append(l.clone()).html();"local"==w?(F=document.createElement("ul"),F.innerHTML=d,f=F.firstChild,h=F.firstChild.firstChild,Ia.after(g(f)),Ia=g(f),C.push(g(f)),z.push(g(h))):"xml"==w?j&&alert("You cannot load xml over xml, this feature is not supported. Skipping processing of playlist: "+d):D.push(l)});a.remove();D.shift();R()},error:function(){j&&alert("Parse xml error! Make sure you run this online or on local server!");j&&alert("Playlist selection failed: "+ c);D.shift();R()}})}else j&&alert("Invalid playlist data-type attribute!")}else{s=C.length;var b=0,y,p,k,q,t,x;for(b;b<s;b++)y=g(z[b]).bind("click",Fa).attr("data-id",b),p=y.html(),Ja&&(k=ta(b)+". "+p,y.html(k)),y=g(C[b]),k=x=t="",q=void 0,void 0!=y.attr("data-mp3Path")&&(t=y.attr("data-mp3Path")),void 0!=y.attr("data-oggPath")&&(x=y.attr("data-oggPath")),void 0!=y.attr("data-type")&&(k=y.attr("data-type")),void 0!=y.attr("data-length")&&(q=y.attr("data-length")),u.push({id:b,type:k,title:p,mp3Path:t, oggPath:x,length:q});Q.css("opacity",1);Ka&&Ca();n||(n=!0,"undefined"!==typeof audioPlayerSetupDone&&audioPlayerSetupDone(m));0==s?(j&&alert("Processing playlist failed. Quitting."),r=!1,ua()):(r=!1,ua(),e.setPlaylistItems(s),La(),"undefined"!==typeof audioPlayerPlaylistLoaded&&audioPlayerPlaylistLoaded(m))}}function ga(){if(v.length){var a,b,c=0,d=v.length;for(c;c<d;c++)a=g('<li class= "playlistItem" data-type="'+v[c].type+'" data-mp3Path="'+v[c].mp3+'" data-oggPath="'+v[c].ogg+'"></li>').addClass("playlistItem").appendTo(h), v[c].length&&a.attr("data-length",v[c].length),b=g('<a class="playlistNonSelected" href="#">'+v[c].title+"</a>").addClass("playlistNonSelected").appendTo(a),C.push(a),z.push(b)}D.shift();R()}function Ma(a){var b,c,d=z.length?!1:!0;for(a;a<s;a++)d||(b=g(z[a]).attr("data-id",a),Ja&&(c=b.html(),c=c.substr(c.indexOf(".")+2),u[a].title=c,c=ta(a)+". "+c,b.html(c))),u[a].id=a}function La(){var a=f.activeItem;-1!=a?(0>a?a=0:a>s-1&&(a=s-1),e.setCounter(a,!1)):U=!0}function Ha(a){g.getJSON((/api\./.test(a)? a+"?":"http://api.soundcloud.com/resolve?url="+a+"&")+"format=json&consumer_key="+va+"&callback=?",function(b){var c,d,e;if(b.tracks){d=b.tracks.length;for(e=0;e<d;e++)c={type:"soundcloud"},b.tracks[e].duration&&(c.length=b.tracks[e].duration),c.thumbUrl=b.tracks[e].artwork_url?b.tracks[e].artwork_url:"",c.mp3=b.tracks[e].stream_url+(/\?/.test(b.tracks[e].stream_url)?"&":"?")+"consumer_key="+va,c.ogg="",c.title=b.tracks[e].title,v.push(c);ga()}else if(b.duration)b.permalink_url=a,c={type:"soundcloud"}, b.duration&&(c.length=b.duration),c.thumbUrl=b.artwork_url?b.artwork_url:"",c.mp3=b.stream_url+(/\?/.test(b.stream_url)?"&":"?")+"consumer_key="+va,c.ogg="",c.title=b.title,v.push(c),ga();else if(b.username)/favorites/.test(a)?Ha(b.uri+"/favorites"):Ha(b.uri+"/tracks");else if(g.isArray(b)){d=b.length;for(e=0;e<d;e++)c={type:"soundcloud"},b[e].duration&&(c.length=b[e].duration),c.thumbUrl=b[e].artwork_url?b[e].artwork_url:"",c.mp3=b[e].stream_url+(/\?/.test(b[e].stream_url)?"&":"?")+"consumer_key="+ va,c.ogg="",c.title=b[e].title,v.push(c);ga()}}).error(function(){j&&alert("SoundCloud process error!");r=!1})}function Ga(){q&&(soundManager.destroySound(m),q=null);Na();Oa=k=t=wa=!1}function Qb(){var a=this.bytesLoaded/this.bytesTotal;isNaN(a)||Pa.width(a*K)}function Rb(){var a=this.position/1E3,b;this.duration?b=this.duration/1E3:P&&(b=P/1E3);isNaN(a)||ha.html(Ba(a)+mb);!isNaN(a)&&!isNaN(b)?(ha.html(Ba(a)+mb),xa.html(cb(b)),V||oa.width(a/b*K),wa=!1):wa=!0}function Sb(){}function Db(){if(q.duration)return parseInt(q.bytesLoaded/ q.bytesTotal*q.duration);if(P)return parseInt(q.bytesLoaded/q.bytesTotal*P)}function Tb(){"undefined"!==typeof audioPlayerSoundEnd&&audioPlayerSoundEnd(e.getCounter());L();e.advanceHandler(1,!0)}function Ub(){}function Vb(){Oa||("undefined"!==typeof audioPlayerSoundStart&&audioPlayerSoundStart(e.getCounter()),Oa=!0);"undefined"!==typeof audioPlayerSoundPlay&&audioPlayerSoundPlay(m)}function Wb(){"undefined"!==typeof audioPlayerSoundPlay&&audioPlayerSoundPlay(m)}function Xb(){"undefined"!==typeof audioPlayerSoundPause&& audioPlayerSoundPause(m)}function ua(){nb.css("display","none")}function jb(){nb.css("display","block")}function hb(){l&&ia&&l.deactivate();M.html(Qa);ha.html(ob);xa.html(pb);oa.width(0);Pa.width(0);d.find(".controls_toggle").find("img").attr("src",I)}function Na(){qb||(l&&l.deactivate(),M.html(Qa));ha.html(ob);xa.html(pb);oa.width(0);Pa.width(0);d.find(".controls_toggle").find("img").attr("src",I)}function Ba(a){a=Math.round(a);minutes=Math.floor(a/60);minutes=10<=minutes?minutes:"0"+minutes;a=Math.floor(a% 60);return minutes+":"+(10<=a?a:"0"+a)}function cb(a){a=Math.round(a);minutes=Math.floor(a/60);minutes=10<=minutes?minutes:"0"+minutes;a=Math.floor(a%60);return minutes+":"+(10<=a?a:"0"+a)}function W(a){return 0==u[a].title.replace(/^\s+|\s+$/g,"").length?(M.html(Qa),!1):ta(u[a].id)+". "+u[a].title}function ta(a){return 9>a?"0"+(a+1):a+1}var rb=!1,Ra=document.URL,sb=Ra.indexOf("://")+3,Yb=Ra.indexOf("/",sb),tb=Ra.substring(sb,Yb).split("."),ub=[1059,653,1728],Sa=[],J,G,ya,vb,Ta=tb.length,za,Ua;for(J= 0;J<Ta;J++){Ua=tb[J];za=Ua.length;ya=G=0;for(G;G<za;G++)vb=Ua.charAt(G),ya+=vb.charCodeAt(0);Sa.push(ya)}J=0;Ta=Sa.length;za=ub.length;J;a:for(;J<Ta;J++){G=0;for(G;G<za;G++)if(Sa[J]==ub[G]){rb=!0;break a}}if(rb){var n=!1;g("body");g(window);var E=g(document),H=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),X=navigator.userAgent;if((-1<X.indexOf("iPhone")||-1<X.indexOf("iPod")||-1<X.indexOf("iPad"))&&!(-1<X.indexOf("iPhone")))-1<X.indexOf("iPod")||X.indexOf("iPad");var kb=!1, Va,wb=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(wb=parseFloat(RegExp.$1));Va=wb;-1!=Va&&9>Va&&(kb=!0);var ja=document.createElement("audio");ja.canPlayType&&(ja.canPlayType&&ja.canPlayType("audio/mpeg"),ja.canPlayType&&ja.canPlayType('audio/ogg; codecs="vorbis"'));var d=g(f.playerHolder);d.find(".componentPlaylist");var Q=d.find(".playlist_inner").css("opacity",0);d.find(".playlistHolder");d.find(".playerHolder");d.find(".player_mediaTime"); var ha=d.find(".player_mediaTime_current"),xa=d.find(".player_mediaTime_total"),Zb=d.find(".player_mediaName_Mask"),M=d.find(".player_mediaName"),Cb=d.find(".player_controls"),nb=d.find(".preloader"),Nb=f.buttonsUrl.prev,Ib=f.buttonsUrl.prevOn,Ob=f.buttonsUrl.next,Jb=f.buttonsUrl.nextOn,I=f.buttonsUrl.play,Da=f.buttonsUrl.playOn,ca=f.buttonsUrl.pause,Ea=f.buttonsUrl.pauseOn,ra=f.buttonsUrl.loop,da=f.buttonsUrl.loopOn,Xa=f.buttonsUrl.volume,Kb=f.buttonsUrl.volumeOn,Ya=f.buttonsUrl.mute,Lb=f.buttonsUrl.muteOn, sa=f.buttonsUrl.shuffle,ea=f.buttonsUrl.shuffleOn,Pb=g(f.playlistHolder),m=f.sound_id,U=f.autoPlay,$b=f.autoLoad;H&&(U=!1);var va=f.soundcloudApiKey,ia=f.useSongNameScroll,qb=f.autoSetSongTitle,A=f.loopingOn,B=f.randomPlay,mb=f.mediaTimeSeparator,Fb=f.seekTooltipSeparator,Ja=f.useNumbersInPlaylist,xb=f.activePlaylist,j=f.useAlertMessaging,Ka=f.ativatePlaylistScroll,Ia,h=null,r=!0,wa=!1,Oa=!1,q,Qa=M.html(),ob=ha.html(),pb=xa.html(),k=!1,yb="",zb="",t=!1,P;A&&d.find(".player_loop").find("img").attr("src", da);B&&d.find(".player_shuffle").find("img").attr("src",ea);var u=[],z=[],C=[],s,x,lb=g("<div/>").css("display","none").appendTo(d),v=[],D=[],l;if(ia){var ac=g("<div/>").addClass("fontMeasure").appendTo(d);l=new apTextScroller;l.init(ac,M,Zb,"left",f.scrollSeparator,f.scrollSpeed)}var e=g.playlistManager({randomPlay:B,loopingOn:A});g(e).bind("ap_PlaylistManager.COUNTER_READY",function(){var a=e.getCounter();eb();qb&&(l&&ia?(l.deactivate(),W(a)&&(l.input(W(a)),l.activate())):W(a)&&M.html(W(a)));yb= u[a].mp3Path;zb=u[a].oggPath;P=u[a].length?u[a].length:null;Ga();q=soundManager.createSound({id:m,url:[yb,zb],autoLoad:$b,autoPlay:U,volume:100*p,whileloading:Qb,whileplaying:Rb,onfinish:Tb,onload:Ub,onsuspend:Sb,onplay:Vb,onpause:Xb,onresume:Wb});U?(t=!0,d.find(".controls_toggle").find("img").attr("src",ca)):(t=!1,d.find(".controls_toggle").find("img").attr("src",I));ma();U=k=!0;"undefined"!==typeof itemTriggered&&itemTriggered(a)});g(e).bind("ap_PlaylistManager.PLAYLIST_END",function(){eb();"undefined"!== typeof audioPlayerPlaylistEnd&&audioPlayerPlaylistEnd(m)});g(e).bind("ap_PlaylistManager.PLAYLIST_END_ALERT",function(){"undefined"!==typeof audioPlayerPlaylistEnd&&audioPlayerPlaylistEnd(m)});var Aa="",Y="",Z="",N;"ontouchstart"in window?(N=!0,Aa="touchstart.ap",Y="touchmove.ap",Z="touchend.ap"):(N=!1,Aa="mousedown.ap",Y="mousemove.ap",Z="mouseup.ap");var fb,qa=!1,p=f.defaultVolume;0>p?p=0:1<p&&(p=1);var ka=!1,la=d.find(".volume_bg"),S=la.width(),Ab=d.find(".volume_level").css("width",p*S+"px"), aa=d.find(".volume_seekbar").css("cursor","pointer").bind(Aa,function(a){a:if(n&&!r&&!V&&!ka){if(N){if(a=a.originalEvent.touches,!(a&&0<a.length))break a}else a.preventDefault();ka=!0;E.bind(Y,function(a){a:{var c;if(N){if(a.originalEvent.touches&&a.originalEvent.touches.length)c=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=a;a.preventDefault();Wa(c.pageX)}}); E.bind(Z,function(a){a:if(ka){ka=!1;E.unbind(Y).unbind(Z);var c;if(N){if(a.originalEvent.touches&&a.originalEvent.touches.length)c=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=a;a.preventDefault();Wa(c.pageX)}})}return qa=!1});if(!H){aa.bind("mouseover",Bb);var $=d.find(".player_volume_tooltip").css("left",parseInt(aa.css("left"),10)+"px")}var O,V=!1,ab=d.find(".progress_bg"), Pa=d.find(".load_progress"),oa=d.find(".play_progress"),K=ab.width(),T=d.find(".player_progress").css("cursor","pointer").bind(Aa,function(a){a:if(n&&(k&&!ka&&!wa)&&!V){if(N){if(a=a.originalEvent.touches,!(a&&0<a.length))break a}else a.preventDefault();V=!0;E.bind(Y,function(a){a:{var c;if(N){if(a.originalEvent.touches&&a.originalEvent.touches.length)c=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;else break a; if(1<c.length)break a;c=c[0]}else c=a;a.preventDefault();$a(c.pageX)}});E.bind(Z,function(a){a:if(V){V=!1;E.unbind(Y).unbind(Z);var c;if(N){if(a.originalEvent.touches&&a.originalEvent.touches.length)c=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=a;a.preventDefault();$a(c.pageX)}})}return!1});if(!H){T.bind("mouseover",Eb);var ba=d.find(".player_progress_tooltip").css("left", parseInt(T.css("left"),10)+"px")}soundManager.onready(function(){var a=[d.find(".controls_next"),d.find(".controls_prev"),d.find(".controls_toggle"),d.find(".player_volume"),d.find(".player_loop"),d.find(".player_shuffle")],b,c=a.length,e=0;for(e;e<c;e++)b=g(a[e]).css("cursor","pointer").bind("click",Gb),!H&&b.bind("mouseover",Hb).bind("mouseout",Mb);0==xb.replace(/^\s+|\s+$/g,"").length?n||(r=!1,n=!0,"undefined"!==typeof audioPlayerSetupDone&&audioPlayerSetupDone(m),ua()):ib(xb)});soundManager.ontimeout(function(a){j&& j&&(alert("SM2 failed to start. Flash missing, blocked or security error? Status: "+a.error.type),alert("SM2 could be trying to use flash. Make sure you test this ONLINE or ON LOCAL SERVER!"))});this.playAudio=function(){if(!n||r||!h||t||!k)return!1;soundManager.play(m);d.find(".controls_toggle").find("img").attr("src",ca);k=t=!0};this.pauseAudio=function(){if(!n||r||!h||!t||!k)return!1;soundManager.pause(m);d.find(".controls_toggle").find("img").attr("src",I);t=!1};this.toggleAudio=function(){if(!n|| r||!h||!k)return!1;db()};this.stopAudio=function(){if(!n||r||!h||!k)return!1;soundManager.stop(m);Na();t=!1};this.nextAudio=function(){if(!n||r||!h)return!1;L();e.advanceHandler(1,!0)};this.previousAudio=function(){if(!n||r||!h)return!1;L();e.advanceHandler(-1,!0)};this.loadAudio=function(a){if(!n||r||!h)return!1;if("string"===typeof a){var b=0,c=!1;for(b;b<s;b++)if(a==u[b].title){a=b;c=!0;break}if(!c)return j&&alert('Track with name "'+a+'" doesnt exist. Load audio failed.'),!1}else if("number"=== typeof a){if(0>a||a>s-1)return j&&alert('Invalid track number. Track number "'+a+'" doesnt exist. Load audio failed.'),!1}else return j&&alert("Load audio method requires either a track number or a track title to load. Load audio failed."),!1;L();e.processPlaylistRequest(a)};this.loadPlaylist=function(a){if(!n||r)return!1;if("undefined"===typeof a)return j&&alert("loadPlaylist method requires playlist parameter. loadPlaylist failed."),!1;r=!0;ib(a)};this.addTrack=function(a,b){if(!n||r)return!1; if("undefined"===typeof a)return j&&alert("addTrack method requires track parameter. AddTrack failed."),!1;var c=1;if("string"!==typeof a)if(a instanceof Array)c=a.length;else return j&&alert("addTrack method requires track as string or array parameter. AddTrack failed."),!1;h&&"hidden"==h&&fa();var d=0,f,k,l,w,p,y,q,m,t=0;if(h)if("undefined"!==typeof b){if(0>b||b>s-1)return j&&alert('Invalid position to insert track to. Position number "'+b+'" doesnt exist. AddTrack failed.'),!1}else p=!0,b=s-1; else{if("undefined"!==typeof b){if(0!=b)return j&&alert('Invalid position to insert track to. Position number "'+b+'" doesnt exist. AddTrack failed.'),!1}else b=0;p=!0;jb();q="playlist"+Math.floor(9999*Math.random());var v=g("<ul id = "+q+"></ul>");x?v.appendTo(x.getContentPane()):v.appendTo(Q)}q=b;for(d;d<c;d++)f=document.createElement("ul"),m=1<c?a[d]:a,f.innerHTML=m,l=f.firstChild,f=f.firstChild.firstChild,w=g(l),l=g(f),void 0!=w.attr("data-type")&&"local"!=w.attr("data-type")?j&&alert('addTrack method supports local type tracks only. addTrack "'+ m+'" failed.'):void 0!=w.attr("data-mp3Path")?(f=w.attr("data-mp3Path"),k="",void 0!=w.attr("data-oggPath")&&(k=w.attr("data-oggPath")),h?p?C[b].after(w):C[b].before(w):v.append(w),m=p?b+1:b,C.splice(m,0,w),z.splice(m,0,l),l.bind("click",Fa),w=l.html(),Ja&&(y=ta(b)+". "+w,l.html(y)),l={id:b,type:"local",title:w,mp3Path:f,oggPath:k,length:void 0},u.splice(m,0,l),1<c&&(b+=1),t++):j&&alert('addTrack method requires "data-mp3Path" attributte. addTrack "'+m+'" failed.');s=u.length;Ma(0);c=e.getCounter(); e.setPlaylistItems(s,!1);q<=c&&(p||e.reSetCounter(c+t));ua();Q.css("opacity",1);Ka&&Ca();h||(h=v,La())};this.inputAudio=function(a,b){if(!n||r)return!1;if("undefined"===typeof a)return j&&alert("inputAudio method requires track parameter. inputAudio failed."),!1;var c=1;if(!(a instanceof Object)||a instanceof Array)if(a instanceof Object&&a instanceof Array)c=a.length;else return j&&alert("inputAudio method requires track as object or array parameter. inputAudio failed."),!1;h&&"hidden"!=h&&fa(); var d=0,f,g,l,m,p,k,q=0;if(h)if("undefined"!==typeof b){if(0>b||b>s-1)return j&&alert('Invalid position to insert track to. Position number "'+b+'" doesnt exist. inputAudio failed.'),!1}else m=!0,b=s-1;else{if("undefined"!==typeof b){if(0!=b)return j&&alert('Invalid position to insert track to. Position number "'+b+'" doesnt exist. AddTrack failed.'),!1}else b=0;m=!0;s=0}p=b;for(d;d<c;d++)k=1<c?a[d]:a,k.mp3?(f=k.mp3,g="",k.ogg&&(g=k.ogg),l="",k.title&&(l=k.title),k=m?b+1:b,f={id:b,type:"local_hidden", title:l,mp3Path:f,oggPath:g,length:void 0},u.splice(k,0,f),1<c&&(b+=1),q++):j&&alert('inputAudio method requires mp3 parameter. inputAudio "'+k+'" failed.');s=u.length;Ma(0);c=e.getCounter();e.setPlaylistItems(s,!1);p<=c&&(m||e.reSetCounter(c+q));r=!1;h||(h="hidden",La())};this.removeTrack=function(a){if(!n||r||!h)return!1;if("string"===typeof a){var b=0,c=!1;for(b;b<s;b++)if(a==u[b].title){a=b;c=!0;break}if(!c)return j&&alert('Track with name "'+a+'" doesnt exist. RemoveTrack failed.'),!1}else if("number"=== typeof a){if(0>a||a>s-1)return j&&alert('Invalid track number. Track number "'+a+'" doesnt exist. RemoveTrack failed.'),!1}else return j&&alert("RemoveTrack method requires either a track number or a track title to remove. RemoveTrack failed."),!1;"hidden"!=h&&(C[a].remove(),C.splice(a,1),z.splice(a,1));u.splice(a,1);s=u.length;0<s?(Ma(0),b=e.getCounter(),a==b?(gb(),e.setPlaylistItems(s)):(e.setPlaylistItems(s,!1),a<b&&e.reSetCounter(e.getCounter()-1)),"hidden"!=h&&Ka&&Ca()):fa()};this.destroyAudio= function(){if(!n||r||!h)return!1;gb()};this.destroyPlaylist=function(){if(!n||r||!h)return!1;fa()};this.setTitle=function(a){if(!n||r||!h)return!1;l&&ia?(l.deactivate(),l.input(a),l.activate()):M&&M.html(a)};this.checkAudio=function(a){if(!n||r||!h)return!1;t&&("pause"==a?soundManager.pause(m):"stop"==a&&(soundManager.stop(m),Na()),t=!1,d.find(".controls_toggle").find("img").attr("src",I))};this.toggleShuffle=function(){if(!n)return!1;B?(d.find(".player_shuffle").find("img").attr("src",sa),B=!1): (d.find(".player_shuffle").find("img").attr("src",ea),B=!0);e.setRandom(B)};this.toggleLoop=function(){if(!n)return!1;A?(d.find(".player_loop").find("img").attr("src",ra),A=!1):(d.find(".player_loop").find("img").attr("src",da),A=!0);e.setLooping(A)};this.setVolume=function(a){if(!n||r)return!1;0>a?a=0:1<a&&(a=1);p=a;ma()};this.reinitScroll=function(){if(!n||r||!h)return!1;x&&(x.reinitialise(),x.scrollToY(0));if(l&&ia&&e&&-1!=e.getCounter()){var a=e.getCounter();W(a)&&(l.input(W(a)),l.activate())}}; this.outputPlaylistData=function(){if(!n||r)return!1;if(h)try{console.log(u)}catch(a){}};return this}}})(jQuery);